<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-8">
                <div class="card">
                    <div class="row">
                        <div class="col-md-6"></div>
                        <div class="col-md-6">
                            <a [routerLink]="['/me/diagnostic']" class="btn btn-info pull-right" style="margin: 15px;">
                                <i class="pe-7s-search"></i> Fazer Auto avaliação
                            </a>
                        </div>
                    </div>
                    <div class="row">
                        <app-diagnostic-view [data]=evaluationDatas *ngIf="evaluationDatas.data!==undefined">
                        </app-diagnostic-view>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card" *ngFor="let currentResults of results" style="padding:15px">
                            <h4>
                                {{currentResults.name}} 
                                <span class="badge ">{{currentResults.evaluations.length}}</span>
                            </h4>

                            <ngx-skeleton-loader *ngIf="currentResults.groups.length==0" count=5 animation="pulse">
                            </ngx-skeleton-loader>
                            <div id="panel-{{currentResults.name}}" class="list-group"
                                *ngIf="currentResults.groups.length>0">
                                <ul class="list-group" *ngFor="let group of currentResults.groups">
                                    <li class="list-group-item list-group-item-action active">
                                        <b>{{group[0]}}</b>
                                        <button class="btn btn-default pull-right btn-sm"
                                            (click)="registGoal(currentResults, group[0])" style="color: #FFF;"> <i
                                                class="pe-7s-plus" style="color: #FFF;"></i> Registar objectivo</button>
                                    </li>
                                    <div *ngFor="let item of group[1]">
                                        <li class="list-group-item">
                                            {{item.name}}
                                        </li>
                                    </div>
                                </ul>

                                <ul class="list-group" *ngFor="let group of otherResultsx(currentResults)">
                                    <li class="list-group-item list-group-item-action bg-info">
                                        <b>{{group}}</b><button class="btn btn-default pull-right btn-sm"
                                            (click)="registGoal(currentResults, group)"> <i class="pe-7s-plus"
                                                style="color: #000;"></i> Registar objectivo</button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<jw-modal id="result-modal" class="sm" title="{{goal.val.code}} - {{goal.val.name}}"
    subtitle="Carregar Objectivos <b>{{goal.group}} </b>">
    <div class="row">
        <form [formGroup]="form" (ngSubmit)="saveGoal()">
            <div class="col-md-12">
                <div class="form-group">
                    <label for="inputObjectives">Objectivo<span class="error">*</span></label>
                    <input type="text" class="form-control form-control-lg" [(ngModel)]="goal.objectives"
                        formControlName="objectives" id="inputObjectives">
                    <div *ngIf="controls.objectives.touched  && controls.objectives.invalid" class="error">
                        <div *ngIf="controls.objectives.errors.required">Este campo é obrigatório</div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="inputAnualGoal">Meta Anual<span class="error">*</span></label>
                    <input type="number" class="form-control form-control-lg" (keyup)="setPartialGoal()"
                        [(ngModel)]="goal.anualGoal" formControlName="anualGoal" id="inputAnualGoal">
                    <div *ngIf="controls.anualGoal.touched  && controls.anualGoal.invalid" class="error">
                        <div *ngIf="controls.anualGoal.errors.required">Este campo é obrigatório</div>
                    </div>
                </div>
                <div style="border:solid 1px #ddd; padding:5px; padding-left:60px">
                    <div class="form-group" *ngFor="let item of goal.partials; let i=index">
                        <label for="exampleInputPassword1">{{i+1}}º Trimestre</label>
                        <input type="number" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp"
                            [(ngModel)]="item.value" name="{{i}}_partial" (keyup)="setAnualGoal()"
                            [ngModelOptions]="{standalone: true}">
                    </div>
                </div>
            </div>
            <div class="col-md-12 text-center"><br>
                <button class="btn btn-success btn-fill" type="submit">Salvar</button>
            </div>
        </form>
    </div>
</jw-modal>